services:
    MarfaTech\Bundle\ApiPlatformBundle\ArgumentResolver\ApiCollectionEntryDtoArgumentResolver:
        arguments:
            - '@MarfaTech\Bundle\ApiPlatformBundle\Factory\ApiDtoFactory'
        tags:
            - { name: controller.argument_value_resolver, priority: 250 }

    MarfaTech\Bundle\ApiPlatformBundle\ArgumentResolver\ApiEntryDtoArgumentResolver:
        arguments:
            - '@MarfaTech\Bundle\ApiPlatformBundle\Factory\ApiDtoFactory'
        tags:
            - { name: controller.argument_value_resolver, priority: 250 }

    MarfaTech\Bundle\ApiPlatformBundle\EventListener\ApiResponseListener:
        class:      MarfaTech\Bundle\ApiPlatformBundle\EventListener\ApiResponseListener
        arguments:
            - '@marfatech_api_platform.guesser.api_error_code'
            - '@MarfaTech\Bundle\ApiPlatformBundle\Factory\ApiDtoFactory'
            - '@?Symfony\Component\Translation\TranslatorInterface'
        calls:
            - ['setLogger', ['@MarfaTech\Bundle\ApiPlatformBundle\Logger\ApiPlatformLogger']]
        tags:
            - { name: kernel.event_listener, event: kernel.exception, priority: 1 }
            - { name: kernel.event_listener, event: kernel.response }

    MarfaTech\Bundle\ApiPlatformBundle\EventListener\MinimalApiVersionRequestListener:
        arguments:
            - '%marfatech_api_platform.minimal_api_version%'
        tags:
            - { name: kernel.event_listener, event: kernel.request, priority: 128 }

    MarfaTech\Bundle\ApiPlatformBundle\Factory\ApiDtoFactory:
        class:      MarfaTech\Bundle\ApiPlatformBundle\Factory\ApiDtoFactory
        arguments:
            - '@Linkin\Bundle\SwaggerResolverBundle\Factory\SwaggerResolverFactory'
    marfatech_api_platform.factory.api_dto:
        alias:      MarfaTech\Bundle\ApiPlatformBundle\Factory\ApiDtoFactory

    MarfaTech\Bundle\ApiPlatformBundle\Logger\ApiPlatformLogger:
        arguments:
            - '@?logger'
        tags:
            - { name: 'monolog.logger', channel: 'marfatech_api_platform' }
